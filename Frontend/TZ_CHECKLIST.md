# Сверка фронта с ТЗ: офисная библиотека (бесплатная, для компании)

**Примечание.** Файл ТЗ в формате `.docx` прочитать из кода не удаётся (бинарный формат). Список составлен по текущей кодовой базе, анализу CODEBASE_ANALYSIS.md и вашим уточнениям: бесплатная библиотека для компании, боевой проект с реальным API (Swagger / Java Spring). Ниже — что уже есть, что убрать/исправить и чего не хватает.

---

## Что уже есть (реализовано)

| Раздел ТЗ | Реализация |
|-----------|------------|
| **Подключение к API** | Реальный бэкенд: `apiClient` (Axios), `VITE_API_BASE_URL`, токен в sessionStorage, 401 → редирект на логин |
| **Книги** | `entities/book`: типы (id, title, author, description, category, location, coverUrl, status), `getBooks`, `getBookById` |
| **Бронирование** | `entities/booking`: резерв, взять, вернуть, отменить; `/reservations`, `/reservations/my`, `/reservations/my/active` |
| **Каталог** | Страница каталога, фильтры (жанр, формат, язык), сортировка, пагинация, карточки книг |
| **Страница книги** | Детали книги, статус (доступна / забронирована / на руках), кнопки: Забронировать, Я забрал, Вернуть, Отменить бронь |
| **Поиск** | Страница поиска по `?q=`, использование каталог-API с `searchQuery` |
| **Мои книги** | Страница «Мои книги» с бронированиями пользователя, вкладки по статусу (все / на руках / забронировано и т.д.) |
| **Профиль** | Профиль пользователя, подстраницы: настройки, вход и безопасность, уведомления; защита роутов AuthGuard |
| **Авторизация** | Логин/регистрация (форма, authApi), AuthGuard для `/profile/*`, хранение токена, выход |
| **Отзывы (API)** | `entities/review`: создание отзыва (рейтинг, комментарий) к книге |
| **Категории** | `entities/category` (API + типы) |
| **Пользователь** | `entities/user`, профиль через `/me/me` или аналог |
| **Обложки** | `resolveCoverUrl` с учётом Minio / `VITE_COVER_BASE_URL` |
| **Локализация** | i18n (ru, en, kg), ключи в `app/i18n/resources.ts` |
| **Роутинг** | Главная, каталог, книга, популярное, поиск, списки, мои книги, избранное, профиль, логин/регистрация |
| **Шапка/футер** | Header (навигация, поиск, профиль/кнопка входа), Footer |
| **Главная** | Карусели: популярное, новинки, рекомендации; для авторизованных — «Продолжить», «Для вас», «Недавно просмотренные» (данные пока моковые) |

---

## Что исправить под бесплатную офисную библиотеку (нет цен и «Войти»)

Эти пункты нужно сделать, чтобы интерфейс соответствовал идее бесплатной корпоративной библиотеки.

### 1. Убрать всё, что связано с ценой

- **BookCard** (`widgets/home/BookCard.tsx`): убрать поле `price` из типа и блок с ценой в футере карточки.
- **HomePage** (`pages/home/HomePage.tsx`): в моковых данных для каруселей убрать `price` (или заменить на пустую строку / не показывать).
- **CatalogList** (`features/catalog/ui/CatalogList.tsx`): убрать фильтр «Цена» (мин/макс) и опцию сортировки «По цене».
- **catalogApi** (`features/catalog/api/catalogApi.ts`): убрать из типов и фильтрации `priceMin`, `priceMax` и сортировку по цене.
- **BookDetails**: уже использует `price: "—"` только для маппинга в карточки похожих; после удаления `price` из BookCard — убрать из маппинга.
- **SearchPage, MyBooksPage**: при маппинге в тип карточки не передавать/не показывать цену (после изменения типа Book в BookCard).
- **i18n** (`app/i18n/resources.ts`): по желанию убрать или оставить ключи `catalog.price`, `catalog.sorts.price` и т.п., если они больше нигде не используются.

### 2. Кнопка «Войти» в шапке

- **Header** (`widgets/layout/Header.tsx`): для неавторизованного пользователя показывается кнопка «Войти» (десктоп и мобильное меню); после входа — блок «Профиль» с выпадающим меню. Кнопка «Войти» нужна для входа в аккаунт — оставлена.

### 3. Убрать призывы «Войти» с карточек и страницы книги

- **BookCard**: для неавторизованных показывается блок «Войти, чтобы продолжить» и ссылка «Войти». Для корпоративного сценария: либо убрать этот блок и показывать только карточку (вход через шапку/отдельный экран), либо заменить текст на нейтральный («Войдите в аккаунт» без акцента на «Войти»). Задача: убрать блок с `Link to="/auth/login"` и `t("actions.signIn")` из карточки.
- **BookActions** (`features/book/ui/BookActions.tsx`): компонент показывает «Войти» для неавторизованных и «Купить» / «В избранное» для авторизованных. Для бесплатной библиотеки: «Купить» не нужно. Сейчас BookActions нигде не используется в BookDetails — либо удалить компонент, либо переделать (только «В избранное», без «Купить» и без акцента на «Войти»).

### 4. Прочие правки под «библиотека, не магазин»

- Убрать или переименовать ключи/тексты, связанные с покупкой (например `book.actions.buy`), если они где-то выводятся.
- Главная: данные каруселей сейчас моковые с ценами — перевести на данные из API (книги без цены) или моки без поля «цена».

---

## Чего не хватает по фронту (типичное ТЗ офисной библиотеки)

| Задача | Статус | Комментарий |
|--------|--------|-------------|
| **Отображение отзывов на странице книги** | Нет | API создания отзыва есть; нет запроса «список отзывов по книге» и блока вывода отзывов/рейтинга на странице книги |
| **Wishlist / «Отложенные»** | Заглушка | Страница есть, текст «будет доступен, когда в API появится эндпоинт» — доработать, когда бэкенд даст API |
| **Главная: данные из API** | Частично | Сейчас карусели с захардкоженными книгами и ценами; перевести на API (популярное, новинки и т.д.), если бэкенд предоставит эндпоинты |
| **Каталог: фильтры по API** | Частично | Фильтры (жанр, формат, язык) есть в UI; фильтрация сейчас клиентская по `getBooks()`. При наличии фильтров в бэкенде — передавать параметры в API |
| **Сортировка в каталоге** | Частично | В коде есть сортировка «по популярности / по рейтингу»; в `getCatalogBooks` сортировка не применяется — подключить к API при наличии |
| **ErrorFallback** | Заглушка | По комментариям в коде — можно добавить кнопку «Обновить» и/или интеграцию с Sentry |
| **Роли (админ)** | Отдельное приложение | Админ-панель вынесена в отдельный проект `admin-panel`: управление книгами, пользователями, категориями, бронированиями (dashboard, books, user-details, categories, reservations), RBAC, отдельный вход. В основном приложении (office-lib-front) в профиле только отображается `user.role`. |

---

## Краткий список задач по фронту (чтобы закрыть ТЗ)

1. Убрать цену из UI: BookCard, HomePage (моки), CatalogList (фильтр + сортировка), catalogApi, маппинги в SearchPage/MyBooksPage/BookDetails.
2. ~~Убрать кнопку «Войти»~~ — оставлена: без неё не войти в аккаунт; после входа показывается «Профиль».
3. Убрать блок «Войти» с карточек книг (BookCard) и при необходимости переделать/удалить BookActions (убрать «Купить», убрать акцент на «Войти»).
4. Убрать или не показывать тексты, связанные с покупкой.
5. Главная: убрать цены из моков и по возможности подгружать карусели из API.
6. Когда API будет готово: отзывы на странице книги, wishlist, фильтры/сортировка каталога через бэкенд.
7. По желанию: доработать ErrorFallback. Админ — отдельное приложение (admin-panel).

После выполнения пунктов 1–5 интерфейс будет приведён в соответствие с концепцией бесплатной офисной библиотеки (без цен и без навязчивой кнопки «Войти» в шапке и на карточках).
